module Mortalical
  def self.survival_percentage(birth_year, lookup_year)
    if num = LIFE_TABLE[lookup_year-birth_year]
      (num*100).round(num < 0.1 ? 1 : 0).to_s + "%"
    else
      "<" + (LIFE_TABLE.last * 100).round(1).to_s + "%"
    end
  end
  LIFE_TABLE = [
    100000.0/100000,
    99388.0/100000,
    99345.0/100000,
    99318.0/100000,
    99297.0/100000,
    99281.0/100000,
    99267.0/100000,
    99254.0/100000,
    99243.0/100000,
    99233.0/100000,
    99224.0/100000,
    99216.0/100000,
    99208.0/100000,
    99196.0/100000,
    99179.0/100000,
    99154.0/100000,
    99121.0/100000,
    99080.0/100000,
    99032.0/100000,
    98975.0/100000,
    98910.0/100000,
    98836.0/100000,
    98754.0/100000,
    98666.0/100000,
    98575.0/100000,
    98483.0/100000,
    98391.0/100000,
    98298.0/100000,
    98204.0/100000,
    98109.0/100000,
    98011.0/100000,
    97910.0/100000,
    97806.0/100000,
    97699.0/100000,
    97587.0/100000,
    97472.0/100000,
    97352.0/100000,
    97225.0/100000,
    97091.0/100000,
    96949.0/100000,
    96798.0/100000,
    96637.0/100000,
    96464.0/100000,
    96275.0/100000,
    96065.0/100000,
    95833.0/100000,
    95576.0/100000,
    95296.0/100000,
    94990.0/100000,
    94658.0/100000,
    94295.0/100000,
    93901.0/100000,
    93475.0/100000,
    93017.0/100000,
    92526.0/100000,
    92000.0/100000,
    91437.0/100000,
    90834.0/100000,
    90190.0/100000,
    89502.0/100000,
    88770.0/100000,
    87992.0/100000,
    87165.0/100000,
    86286.0/100000,
    85348.0/100000,
    84345.0/100000,
    83264.0/100000,
    82098.0/100000,
    80843.0/100000,
    79501.0/100000,
    78069.0/100000,
    76543.0/100000,
    74913.0/100000,
    73169.0/100000,
    71302.0/100000,
    69301.0/100000,
    67165.0/100000,
    64896.0/100000,
    62479.0/100000,
    59909.0/100000,
    57188.0/100000,
    54321.0/100000,
    51309.0/100000,
    48165.0/100000,
    44901.0/100000,
    41497.0/100000,
    37956.0/100000,
    34351.0/100000,
    30726.0/100000,
    27131.0/100000,
    23619.0/100000,
    20245.0/100000,
    17061.0/100000,
    14115.0/100000,
    11447.0/100000,
    9087.0/100000,
    7049.0/100000,
    5335.0/100000,
    3935.0/100000,
    2823.0/100000,
    1968.0/100000,
  ]
end